<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>summary | 温迪的笔记本</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="小朋友,你是不是有很多的问号?">
    <link rel="preload" href="/assets/css/0.styles.bf49a183.css" as="style"><link rel="preload" href="/assets/js/app.7ec28ff8.js" as="script"><link rel="preload" href="/assets/js/3.1f6c90bc.js" as="script"><link rel="preload" href="/assets/js/1.930497be.js" as="script"><link rel="preload" href="/assets/js/23.50c47451.js" as="script"><link rel="prefetch" href="/assets/js/10.9f38ebd6.js"><link rel="prefetch" href="/assets/js/11.5d75391d.js"><link rel="prefetch" href="/assets/js/12.d0cbda4d.js"><link rel="prefetch" href="/assets/js/13.cd4bd8a1.js"><link rel="prefetch" href="/assets/js/14.9a1d7021.js"><link rel="prefetch" href="/assets/js/15.57370162.js"><link rel="prefetch" href="/assets/js/16.9959e172.js"><link rel="prefetch" href="/assets/js/17.242f7ad1.js"><link rel="prefetch" href="/assets/js/18.c8ec0dc7.js"><link rel="prefetch" href="/assets/js/19.cdcb8c2a.js"><link rel="prefetch" href="/assets/js/20.24e85585.js"><link rel="prefetch" href="/assets/js/21.80f13a1d.js"><link rel="prefetch" href="/assets/js/22.d932ae2b.js"><link rel="prefetch" href="/assets/js/4.4d2f5a32.js"><link rel="prefetch" href="/assets/js/5.6ed8be48.js"><link rel="prefetch" href="/assets/js/6.673fde29.js"><link rel="prefetch" href="/assets/js/7.4ad49d0e.js"><link rel="prefetch" href="/assets/js/8.a1721084.js"><link rel="prefetch" href="/assets/js/9.5cf74b56.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bf49a183.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-19557b78><div data-v-19557b78><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-19557b78 data-v-19557b78><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-19557b78 data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>温迪的笔记本</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>wendy</span>
            
          <!---->
          2020
        </a></span></div></div> <div class="hide" data-v-19557b78><header class="navbar" data-v-19557b78><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/touxiang.jpg" alt="温迪的笔记本" class="logo"> <span class="site-name">温迪的笔记本</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/ES6/" class="nav-link"><i class="iconfont undefined"></i>
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/categories/知识点总结/" class="nav-link"><i class="iconfont undefined"></i>
  知识点总结
</a></li><li class="dropdown-item"><!----> <a href="/categories/工作错误总结/" class="nav-link"><i class="iconfont undefined"></i>
  工作错误总结
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/wendy0428?tab=repositories" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-19557b78></div> <aside class="sidebar" data-v-19557b78><div class="personal-info-wrapper" data-v-042e23d4><img src="/touxiang.jpg" alt="author-avatar" class="personal-img" data-v-042e23d4> <h3 class="name" data-v-042e23d4>
    wendy
  </h3> <div class="num" data-v-042e23d4><div data-v-042e23d4><h3 data-v-042e23d4>13</h3> <h6 data-v-042e23d4>Article</h6></div> <div data-v-042e23d4><h3 data-v-042e23d4>10</h3> <h6 data-v-042e23d4>Tag</h6></div></div> <hr data-v-042e23d4></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/ES6/" class="nav-link"><i class="iconfont undefined"></i>
  ES6
</a></li><li class="dropdown-item"><!----> <a href="/categories/知识点总结/" class="nav-link"><i class="iconfont undefined"></i>
  知识点总结
</a></li><li class="dropdown-item"><!----> <a href="/categories/工作错误总结/" class="nav-link"><i class="iconfont undefined"></i>
  工作错误总结
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/wendy0428?tab=repositories" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>summary</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/2020/summary.html#_2020-07-02" class="sidebar-link">2020-07-02</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/2020/summary.html#个人博客搭建" class="sidebar-link">个人博客搭建</a></li></ul></li><li><a href="/pages/2020/summary.html#_2020-07-10" class="sidebar-link">2020-07-10</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/2020/summary.html#linux权限位详解" class="sidebar-link">Linux权限位详解</a></li><li class="sidebar-sub-header"><a href="/pages/2020/summary.html#linux-权限表" class="sidebar-link">Linux 权限表</a></li><li class="sidebar-sub-header"><a href="/pages/2020/summary.html#is-l-输出详情" class="sidebar-link">Is -l 输出详情</a></li></ul></li><li><a href="/pages/2020/summary.html#_2020-07-13" class="sidebar-link">2020-07-13</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/2020/summary.html#跨域" class="sidebar-link">跨域</a></li></ul></li><li><a href="/pages/2020/summary.html#_2020-07-14" class="sidebar-link">2020-07-14</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/2020/summary.html#url中的-hash" class="sidebar-link">url中的#(hash)</a></li><li class="sidebar-sub-header"><a href="/pages/2020/summary.html#轮询" class="sidebar-link">轮询</a></li><li class="sidebar-sub-header"><a href="/pages/2020/summary.html#websocket、长短连接" class="sidebar-link">websocket、长短连接</a></li></ul></li><li><a href="/pages/2020/summary.html#_2020-07-16" class="sidebar-link">2020-07-16</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/2020/summary.html#linux下vim的使用" class="sidebar-link">linux下vim的使用</a></li><li class="sidebar-sub-header"><a href="/pages/2020/summary.html#linux-命令" class="sidebar-link">linux 命令</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-19557b78><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>summary</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>wendy</span>
            
          <!---->
          2020
        </a></span></div></div> <div data-v-19557b78><main class="page"><div class="page-title" style="display:none;"><h1>summary</h1> <hr> <div data-v-34ea29db><i class="iconfont reco-account" data-v-34ea29db><span data-v-34ea29db>wendy</span></i> <i class="iconfont reco-date" data-v-34ea29db><span data-v-34ea29db>2020-07-01</span></i> <!----> <i class="iconfont reco-tag tags" data-v-34ea29db><span class="tag-item" data-v-34ea29db>summary</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h2 id="_2020-07-02"><a href="#_2020-07-02" class="header-anchor">#</a> 2020-07-02</h2> <h3 id="个人博客搭建"><a href="#个人博客搭建" class="header-anchor">#</a> 个人博客搭建</h3> <div class="custom-block warning"><p>GitHub Page，一般多用于托管个人的静态网站，所以现在很多人也用来它来搭建私人博客，也算是省去了购买服务器、域名等等一系列复杂的操作。</p></div> <p><strong>使用步骤:</strong></p> <div class="language- extra-class"><pre><code>* 先搭建 `vuepress` 
* 安装 `vuepress-theme-reco vuepress` 的主题
* 在 GitHub 中创建一个仓库,仓库命名必须为: GitHub用户名.github.io
* 克隆当前仓库到本地, git clone GitHub用户名.github.io
* vuePress 打包,生成的静态文件 .vuepress/dist 文件夹中 index.html,赋值粘贴到上面的仓库中
* 提交推送到远端,https://github 用户名.github.io/ 进行访问
* sh deploy.sh 将 vuepress 一件打包上传到 Github page.
* Github 可能会有缓存,导致页面不是最新的.
</code></pre></div><h2 id="_2020-07-10"><a href="#_2020-07-10" class="header-anchor">#</a> 2020-07-10</h2> <h3 id="linux权限位详解"><a href="#linux权限位详解" class="header-anchor">#</a> <a href="https://www.cnblogs.com/liuhedong/p/10739718.html" title="标题" target="_blank" rel="noopener noreferrer">Linux权限位详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <h4 id="linux-权限位-有5种权限-分别是-r、w、x、s、t"><a href="#linux-权限位-有5种权限-分别是-r、w、x、s、t" class="header-anchor">#</a> Linux 权限位 : 有5种权限,分别是, r、w、x、s、t</h4> <ul><li><p>可读权限 r (read)</p></li> <li><p>可写权限 w (write)</p></li> <li><p>可执行权限 x (excute)</p></li> <li><p>Setuid：s（Set User ID）</p></li> <li><p>Setgid：s（Set Group ID）</p></li> <li><p>粘滞位：t</p></li></ul> <h4 id="可读权限"><a href="#可读权限" class="header-anchor">#</a> 可读权限</h4> <ul><li><p>对于文件,可读权限:</p> <ul><li>用字符表示 : r</li> <li>用八进制表示: 4</li> <li>可以读取文件里的内容</li></ul></li> <li><p>对于目录,可读权限:</p> <ul><li>用字符表示 : r</li> <li>用八进制表示 : 4</li> <li>可以列出目录下的内容</li></ul></li></ul> <h4 id="可写权限"><a href="#可写权限" class="header-anchor">#</a> 可写权限</h4> <ul><li><p>对于文件,可写权限:</p> <ul><li>用字符表示 : w</li> <li>用八进制表示 : 2</li> <li>可以对文件进行更改</li></ul></li> <li><p>对于目录,可写权限:</p> <ul><li>用字符表示 : w</li> <li>用八进制表示 : 2</li> <li>可以在目录下创建文件或目录</li></ul></li></ul> <h4 id="可执行权限"><a href="#可执行权限" class="header-anchor">#</a> 可执行权限</h4> <ul><li><p>对于文件,可写权限:</p> <ul><li>用字符表示 :  x</li> <li>用八进制表示 : 1</li> <li>可以执行该文件(脚本或命令)</li></ul></li> <li><p>对于目录,可写权限:</p> <ul><li>用字符表示 : x</li> <li>用八进制表示 : 1</li> <li>可以 cd 进入该目录</li></ul></li></ul> <h3 id="linux-权限表"><a href="#linux-权限表" class="header-anchor">#</a> Linux 权限表</h3> <table><thead><tr><th style="text-align:center;">字符表示</th> <th style="text-align:center;">八进制</th> <th style="text-align:center;">对于文件</th> <th style="text-align:center;">对于目录</th></tr></thead> <tbody><tr><td style="text-align:center;">r</td> <td style="text-align:center;">4</td> <td style="text-align:center;">读取文件内容</td> <td style="text-align:center;">列出目录下的内容</td></tr> <tr><td style="text-align:center;">w</td> <td style="text-align:center;">2</td> <td style="text-align:center;">对文件进行修改</td> <td style="text-align:center;">在目录下创建文件或目录</td></tr> <tr><td style="text-align:center;">x</td> <td style="text-align:center;">1</td> <td style="text-align:center;">可以执行该文件(脚本或者命令)</td> <td style="text-align:center;">可以 cd 进入该目录</td></tr></tbody></table> <h3 id="is-l-输出详情"><a href="#is-l-输出详情" class="header-anchor">#</a> Is -l 输出详情</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>-r---w-r-x
-r---w-r-x  <span class="token number">1</span> wendy  wheel     0B  <span class="token number">7</span>  <span class="token number">9</span> <span class="token number">21</span>:55 <span class="token number">1</span>*
-rw-rw-rw-  <span class="token number">1</span> wendy  wheel   176K  <span class="token number">7</span>  <span class="token number">9</span> 06:23 adobegc.log
drwx------  <span class="token number">3</span> wendy  wheel    96B  <span class="token number">6</span> <span class="token number">30</span> <span class="token number">19</span>:16 com.apple.launchd.AY9oPiyRmp/
drwxr-xr-x  <span class="token number">2</span> root   wheel    64B  <span class="token number">7</span>  <span class="token number">5</span> <span class="token number">23</span>:25 powerlog/
drwxr-xr-x  <span class="token number">6</span> root   wheel   192B <span class="token number">11</span>  <span class="token number">7</span>  <span class="token number">2019</span> <span class="token punctuation">..</span>/
drwxr-xr-x@ <span class="token number">2</span> wendy  wheel    64B  <span class="token number">7</span>  <span class="token number">5</span> <span class="token number">11</span>:03 com.google.Keystone/
drwxrwxrwt  <span class="token number">7</span> root   wheel   224B  <span class="token number">7</span>  <span class="token number">9</span> <span class="token number">21</span>:55 ./

</code></pre></div><div class="custom-block warning"><p><code>lrwxrwxrwx. 1 root root 7 Oct 3 02:33 bin -&gt; usr/bin</code></p></div> <ul><li><p>第1个字符的含义 :</p> <ul><li><code>-</code> : 常规文件</li> <li><code>b</code> : 块特殊文件</li> <li><code>c</code> : 字符特殊文件</li> <li><code>C</code> : 高性能(&quot;连续数据&quot;)文件</li> <li><code>d</code> : 目录</li> <li><code>D</code> : 门(Solaris 2.5及以上版本)</li> <li><code>l</code> : 符号链接</li> <li><code>M</code> : 离线（”前已“）文件（Cray DMF）</li> <li><code>n</code> : 网络专用文件（HP-UX）</li> <li><code>p</code> : FIFO（命名管道）</li> <li><code>P</code> : 断开（Solaros 10及以上）</li> <li><code>s</code> : 套接字</li> <li><code>?</code> : 其他文件</li></ul></li> <li><p>第2-4字符的含义 :</p> <ul><li><code>r</code> : 属主的读权限</li> <li><code>w</code> : 属主的写权限</li> <li><code>x</code> : 属主的执行权限</li></ul></li> <li><p>第5-7字符的含义 :</p> <ul><li><code>r</code> : 属组的读权限</li> <li><code>w</code> : 属组的写权限</li> <li><code>x</code> : 属组的执行权限</li></ul></li> <li><p>第8-10字符的含义 :</p> <ul><li><code>r</code> : 其他人的读权限</li> <li><code>w</code> : 其他人的写权限</li> <li><code>x</code> : 其他人的执行权限</li></ul></li> <li><p>第11个字符的含义 :</p> <ul><li><code>.</code> : 没有任何其他替代访问方法的 SELinux 安全上下文(没有设置 ACL)</li> <li><code>+</code> : 具有任何其他组合访问方法的SELinux安全上下文（设置了ACL）</li></ul></li> <li><p>第12个字符的含义 : 该文件的硬链接数量</p></li> <li><p>第13个字符的含义 : 该文件的属主</p></li> <li><p>第14个字符的含义 : 该文件的属组</p></li> <li><p>第15个字符的含义 : 该文件的大小</p></li> <li><p>第16-18个字符的含义 : 最后一次修改的时间</p></li> <li><p>第19个字符的含义：文件或目录的名称</p></li> <li><p>第20个字符的含义：链接符号</p></li> <li><p>第21个字符的含义：链接文件的源文件</p></li></ul> <h2 id="_2020-07-13"><a href="#_2020-07-13" class="header-anchor">#</a> 2020-07-13</h2> <h3 id="跨域"><a href="#跨域" class="header-anchor">#</a> <a href="https://juejin.im/post/5815f4abbf22ec006893b431" title="标题" target="_blank" rel="noopener noreferrer">跨域<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p><code>http://mail.163.com/index.html</code></p> <ul><li><code>http//</code> : 这个是<strong>协议</strong>,也就是 HTTP 超文本传输协议,也就是网页在网上传输的协议.</li> <li><code>mail</code>: 这个是<strong>服务器名</strong>,代表着是一个邮箱服务器,所以是 mail.</li> <li><code>163.com</code> : 这个是<strong>域名</strong>,用来定位网站的第一无二的名字.</li> <li><code>mail.163.com</code> : 这个是<strong>网站名</strong>,由服务器+域名组成</li> <li><code>/</code> : 这个是<strong>根目录</strong>,也就是说,通过网站名找到服务器,然后在服务器存放网页的根目录.</li> <li><code>index.html</code> : 这个是根目录下的默认网页当然，(当然,163的默认网页是不是这个我不知道，只是大部分的默认网页，都是index.html</li> <li><code>http://mail.163.com/index.html</code> : 这个叫做<strong>URL,统一资源定位符</strong>,全球性地址,用于定位网上的资源.</li> <li><code>163.com</code> : <strong>一级域名,又称为顶级域名</strong>,顶级域名是由<strong>一个合法的字符串+域名后缀</strong>组成的,所以<code>163.com</code>这种形式的域名才是一级域名,<code>163</code>是域名主体,<code>.com</code>是域名后缀,可以是<code>.net</code>也是域名后缀.</li> <li><code>mail.163.com</code> : <strong>二级域名</strong>,就是一个一级域名下面的主机名,顾名思义,它就是在一级域名前面加上一个字符串,比如<code>asdx.163.com</code>,它可以拥有跟顶级域名同样的功能,但是二级域名是依赖在一级域名的存在而存在的,也就是顶级域名消失了,二级域名也不复存在,反之,二级域名网站不做了,主域名也不受影响.</li></ul> <h4 id="什么是跨域"><a href="#什么是跨域" class="header-anchor">#</a> 什么是跨域</h4> <div class="custom-block warning"><p>跨域: 是指浏览器不能执行其他网站的脚本.它是由<strong>浏览器的同源策略</strong>造成的,是浏览器对 JavaScript 实施的安全限制.</p></div> <div class="custom-block warning"><p>跨域一词从字面意思来看,就是跨域名,但是实际上跨域的范围绝对不止那么狭隘.</p> <p>具体概念如下: 只要<code>协议、域名、端口</code>有任何一个不同,都被当作是不同的域.</p> <p>为什么产生跨域 : 要是随便引用外部文件,不同标签下的页面引用类似的彼的文件,浏览器很容易懵逼,安全也得不到保障.</p> <p>解决: 但在安全限制的同时,也给注入 iframe 或者 ajax 应用上带来了不少麻烦,所以要通过一些方法使得本域的 js 能够操作其他域的页面对象或者其他域的 js 能操作本域的页面对象(iframe)之间.</p></div> <h4 id="为什么跨域"><a href="#为什么跨域" class="header-anchor">#</a> 为什么跨域 ???</h4> <div class="custom-block warning"><p>CSRF</p></div> <h4 id="跨域情况"><a href="#跨域情况" class="header-anchor">#</a> 跨域情况</h4> <table><thead><tr><th style="text-align:center;">URL</th> <th style="text-align:center;">说明</th> <th style="text-align:center;">是否允许通信</th></tr></thead> <tbody><tr><td style="text-align:center;">http://www.a.com/a.js <br>http://www.a.com/b.js</td> <td style="text-align:center;">同一域名下</td> <td style="text-align:center;">允许</td></tr> <tr><td style="text-align:center;">http://www.a.com/lab/a.js<br>http://www.a.com/script/b.js</td> <td style="text-align:center;">同一域名不同文件夹</td> <td style="text-align:center;">允许</td></tr> <tr><td style="text-align:center;">http://www.a.com:8000/a.js<br>http://www.a.com/b.js</td> <td style="text-align:center;">统一域名,不同端口</td> <td style="text-align:center;">不允许</td></tr> <tr><td style="text-align:center;">http://www.a.com/a.js<br>https://www.a.com/b.js</td> <td style="text-align:center;">统一域名,不同协议</td> <td style="text-align:center;">不允许</td></tr> <tr><td style="text-align:center;">http://www.a.com/a.js<br>http://70.32.92.74/b.js</td> <td style="text-align:center;">域名和对应 ip</td> <td style="text-align:center;">不允许</td></tr> <tr><td style="text-align:center;">http://www.a.com/a.js<br>http://script.a.com/b.js</td> <td style="text-align:center;">主域相同,子域不同</td> <td style="text-align:center;">不允许(coolie 这种情况下也不允许访问)</td></tr> <tr><td style="text-align:center;">http://www.a.com/a.js<br>http://a.com/b.js</td> <td style="text-align:center;">同一域名,不同二级域名(coolie 这种情况下也不允许访问)</td> <td style="text-align:center;">不允许</td></tr> <tr><td style="text-align:center;">http://www.cnblogs.com/a.js<br>http://www.a.com/b.js</td> <td style="text-align:center;">不同域名</td> <td style="text-align:center;">不允许</td></tr></tbody></table> <p>注意:</p> <ul><li>如果是协议和端口造成的跨域问题&quot;前台&quot;是无能为力的.</li> <li>在跨域问题上,域仅仅是通过&quot;URL 的首部&quot;来识别而不会去尝试判断相同的<code>IP 地址</code>对应着两个域或两个域是否在同一个<code>IP 地址</code>上,(“URL的首部”指window.location.protocol +window.location.host，也可以理解为“Domains, protocols and ports must match”。)</li></ul> <h4 id="通过document-domain跨域"><a href="#通过document-domain跨域" class="header-anchor">#</a> 通过<code>document.domain</code>跨域</h4> <div class="custom-block warning"><ul><li>浏览器的同源策略: <strong>域名,协议,端口相同,也就是在同一个域里面</strong>.非同源受到的限制: <strong>cookie 不能读取、 dom 无法获得 、ajax 请求不能发送.</strong></li> <li>由于 JavaScript 同源策略的限制,脚本只能读取和所属文档来源相同的窗口和文档的属性.</li> <li>对于已经有成熟产品体系的公司来说,不同的页面可以放在不同的服务器上,这些服务器域名不同,但是拥有相同的上级域名,比如 id.qq.com、 www.qq.com 、user.qzone.qq.com，它们都有公共的上级域名qq.com,这些服务器上的页面之间的跨域访问可以通过 document.domain 来进行</li> <li>修改document.domain的方法只适用于不同子域的框架间的交互,只要我们把两个页面都设置成相同的域名就可以了,但是注意的是,document.domain 的设置是有限制的,我们只能把 document.domain 设置成自身或更高一级的父域,且主域必须相同.</li></ul></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//  a 页面 :  http://a.local.com/a.html</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>domain <span class="token operator">=</span> <span class="token string">'local.com'</span><span class="token punctuation">;</span><span class="token comment">//设置成主域</span>
        <span class="token keyword">var</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> win <span class="token operator">=</span> iframe<span class="token punctuation">.</span>contentWindow<span class="token punctuation">;</span><span class="token comment">//可以获取到iframe里的window对象，但该window对象的属性和方法几乎是不可用的</span>
        <span class="token keyword">var</span> doc <span class="token operator">=</span> win<span class="token punctuation">.</span>document<span class="token punctuation">;</span><span class="token comment">//这里获取不到iframe里的document对象</span>
        <span class="token keyword">var</span> name <span class="token operator">=</span> win<span class="token punctuation">.</span>name<span class="token punctuation">;</span><span class="token comment">//这里同样获取不到window对象的name属性</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>iframe id<span class="token operator">=</span><span class="token string">&quot;iframe&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;http://b.local.com/b.html&quot;</span> onload <span class="token operator">=</span> <span class="token string">&quot;test()&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>iframe<span class="token operator">&gt;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// b页面 : http://b.local.com/b.html</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
    <span class="token comment">// 在iframe载入这个页面也设置document.domain，使之与主页面的document.domain相同</span>
    document<span class="token punctuation">.</span>domain <span class="token operator">=</span> <span class="token string">'local.com'</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h4 id="通过-location-hash-跨域"><a href="#通过-location-hash-跨域" class="header-anchor">#</a> 通过 <code>location.hash</code> 跨域</h4> <div class="custom-block warning"><ul><li>因为<code>父窗口</code>可以对 <code>iframe</code> 进行 <code>URL</code> 读写,<code>iframe</code> 也可以读写父窗口的 <code>URL</code>.</li> <li><code>URL</code>有一部分被成为<code>hash</code>,就是<code>#号</code>及其后面的字符,它一般用于浏览器锚点定位,<code>Server</code>端并不关心这部分,应该说<code>HTTP 请求</code>过程中不会携带<code>hash</code>,所以这部分的修改不会产生<code>HTTP请求</code>,但是会产生浏览器历史纪录.</li> <li>此方法的原理就是改变 <code>URL</code>的<code>hash</code>部分来进行双向通信.</li> <li>每个 <code>window</code>通过改变其他<code>window</code>的<code>location</code>(页面地址)来发送信息,但由于两个页面不在同一个域下 IE/Chrome 不允许修改<code>parent.location.hash</code>的值,所以需要借助于父窗口域名下的一个代理<code>iframe</code>,并通过监听自己的 <code>URL</code>的变化来接收消息.</li> <li>这个方式的通信会造成一些不必要的浏览器历史记录,而且有些浏览器不支持<code>onhashchange</code>事件,需要轮询来获知<code>URL</code>的改变</li> <li>这样做也有缺点,诸如数据直接暴露在了<code>url</code>中,数据容量和类型都有限等.</li></ul></div> <blockquote><p>a 页面(主页面)向嵌套 b页面,单项通信</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//  a 页面 :  http://a.local.com/a.html   a页面传值到子页面 b</span>
<span class="token operator">&lt;</span>iframe id<span class="token operator">=</span><span class="token string">&quot;iframe&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;http://b.local.com/b.html#1&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>iframe<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> parse <span class="token operator">=</span> iframe<span class="token punctuation">.</span>src<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'#'</span><span class="token punctuation">)</span>
        <span class="token keyword">var</span> new_url <span class="token operator">=</span> parse<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'#'</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>parse<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
        iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> new_url
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// b页面 : http://b.local.com/b.html  b页面作为子页面,可以拿到 a 页面传过来的值,单项通信实现</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onload</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> url <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
</code></pre></div><blockquote><p>b 页面(被嵌套的 iframe 页面),向 a 页面(主页面)传值.</p></blockquote> <ul><li>新建一个<code>aa.html</code>页面,该页面和<code>a.html</code>页面同域,并把该页面,作为 <code>b.html</code>页面的 <code>iframe</code> 嵌套其中.</li> <li><code>b.html</code>页面,修改它自身拥有的 <code>iframe</code> 的 <code>url#1</code>的 <code>hash</code>值.</li> <li><code>aa.html</code>页面,可以拿到<code>b.html</code>页面修改的 iframe 的 <code>url</code>, <code>(a -&gt; b -&gt; aa)</code>,通过父元素的父元素的iframe,修改其<code>a.html</code>页面的 src 值,实现了b 页面到 a 页面的双向通信</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// a 页面</span>
<span class="token operator">&lt;</span>iframe id<span class="token operator">=</span><span class="token string">&quot;iframe&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;http://b.local.com/b.html#1&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>iframe<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'iframe.src'</span><span class="token punctuation">,</span> iframe<span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// b页面</span>
<span class="token operator">&lt;</span>iframe id<span class="token operator">=</span><span class="token string">&quot;iframe&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;http://a.local.com/aa.html#1&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;display: none;&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>iframe<span class="token operator">&gt;</span> 
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;iframe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> parse <span class="token operator">=</span> iframe<span class="token punctuation">.</span>src<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'#'</span><span class="token punctuation">)</span>
        <span class="token keyword">var</span> new_url <span class="token operator">=</span> parse<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'#'</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>parse<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'new_url'</span><span class="token punctuation">,</span> new_url<span class="token punctuation">)</span>
        iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> new_url
    s<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// aa 页面</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onload</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> url <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">;</span>
        <span class="token keyword">var</span> parse <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'#'</span><span class="token punctuation">)</span>
        <span class="token keyword">var</span> hash <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>parse<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> iframe <span class="token operator">=</span> parent<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;iframe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> parse <span class="token operator">=</span> iframe<span class="token punctuation">.</span>src<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'#'</span><span class="token punctuation">)</span>
        <span class="token keyword">var</span> new_url <span class="token operator">=</span> parse<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'#'</span> <span class="token operator">+</span> hash
        iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> new_url
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="通过-html5的messagge方法跨域"><a href="#通过-html5的messagge方法跨域" class="header-anchor">#</a> 通过 HTML5的<code>Messagge</code>方法跨域</h4> <div class="custom-block warning"><p>高级浏览器Internet Explorer 8+, chrome，Firefox , Opera 和 Safari 都将支持这个功能。这个功能主要包括接受信息的&quot;message&quot;事件和发送消息的&quot;postMessage&quot;方法</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// a 页面 http://a.local.com/a.html </span>
<span class="token operator">&lt;</span>iframe id<span class="token operator">=</span><span class="token string">&quot;iframe&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;http://b.local.com/b.html#1&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>iframe<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        <span class="token keyword">var</span> ifr <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token keyword">var</span> targetOrigin <span class="token operator">=</span> <span class="token string">&quot;http://b.local.com/b.html&quot;</span><span class="token punctuation">;</span>  
        ifr<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'hello world!'</span><span class="token punctuation">,</span> targetOrigin<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>postMessage 的使用方法:</p> <ul><li>otherWindow.postMessage(message, targetOrigin);
<ul><li>otherWindow:指目标窗口，也就是给哪个window发消息，是 window.frames 属性的成员或者由 window.open 方法创建的窗口</li> <li>message:   是要发送的消息，类型为 String、Object (IE8、9 不支持)</li> <li>targetOrigin:   是限定消息接收范围，不限制请使用 '*</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// b 页面 http://b.local.com/b.html </span>
<span class="token comment">// b页面通过message事件监听并接受消息</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">var</span> <span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">,</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> data <span class="token operator">=</span> event<span class="token punctuation">.</span>data<span class="token punctuation">;</span><span class="token comment">//消息  </span>
        <span class="token keyword">var</span> origin <span class="token operator">=</span> event<span class="token punctuation">.</span>origin<span class="token punctuation">;</span><span class="token comment">//消息来源地址  </span>
        <span class="token keyword">var</span> source <span class="token operator">=</span> event<span class="token punctuation">.</span>source<span class="token punctuation">;</span><span class="token comment">//源Window对象  </span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>origin<span class="token operator">==</span><span class="token string">&quot;http://a.local.com/a.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//hello world!  </span>
        <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span><span class="token punctuation">;</span>  
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window<span class="token punctuation">.</span>addEventListener <span class="token operator">!=</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> onmessage<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window<span class="token punctuation">.</span>attachEvent <span class="token operator">!=</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    <span class="token comment">//for ie  </span>
        window<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onmessage'</span><span class="token punctuation">,</span> onmessage<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h4 id="通过jsonp跨域"><a href="#通过jsonp跨域" class="header-anchor">#</a> 通过<code>jsonp</code>跨域</h4> <div class="custom-block warning"><p>单项跨域(一般用来获取数据),因为通过script 标签引入的 js 是不受同源策略的限制的,所以我们可以通过 script 标签引入一个 js 或者是一个其他后缀形式(如 php/jsp等)的文件,此<strong>文件返回一个 js 函数的调用</strong>.</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// eg1:</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
    url<span class="token operator">:</span> <span class="token string">'http://b.local.com/jsonp.php'</span><span class="token punctuation">,</span>  <span class="token comment">// 跨域请求地址</span>
    type<span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>  <span class="token comment">// 请求类型，默认&quot;GET&quot;，还可以是&quot;POST&quot;</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// 传输数据</span>
    dataType<span class="token operator">:</span> <span class="token string">'jsonp'</span><span class="token punctuation">,</span>
    jsonpCallback<span class="token operator">:</span> <span class="token string">'cb'</span><span class="token punctuation">,</span>
    <span class="token comment">// 请求成功的回调函数</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'res'</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 请求失败的回调函数</span>
    <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'cb'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// eg2</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">function</span> <span class="token function">cd</span><span class="token punctuation">(</span><span class="token parameter">jsondata</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'jsondata'</span><span class="token punctuation">,</span>jsondata<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;http://b.local.com/jsonp.php?callback=cd&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token comment">// 获取数据的地址后面还有一个 callback 参数,按照管理是用过这个参数明哥,当然如果获取数据的 jsonp 地址页面不是你自己能控制的,就得按照提供数据的那一方的规定格式来操作了.</span>
<span class="token comment">// 因为是被当做一个 js 来引入的,所以jsonp.php返回的必须是一个能执行的 js 文件,要和后端约定好,最后输出的是 callback('返回的值').</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// eg3:</span>
<span class="token comment">// 如果页面使用 jquery,那么通过它封装的方法就很方便的进行 jsonp 操作了.</span>
$<span class="token punctuation">.</span><span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token string">'http://b.local.com/jsonp.php?callback=?'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">jsondata</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 处理获得的 json 数据</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'jsondata'</span><span class="token punctuation">,</span>jsondata<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// jquery会自动生成一个全局函数来替换callback=?中的问号，之后获取到数据后又会自动销毁，实际上就是起一个临时代理函数的作用。$.getJSON方法会自动判断是否跨域，不跨域的话，就调用普通的ajax方法；跨域的话，则会以异步加载js文件的形式来调用jsonp的回调函数。</span>

</code></pre></div><div class="custom-block warning"><p>JSONP 的优缺点:</p> <ul><li>优点 :
<ul><li>它不像<code>XMLHttpRequest</code>对象实现的<code>Ajax</code>请求那样受到同源策略的限制;</li> <li>它的兼容性更好,在更加古老的浏览器中都可以运行,不需要<code>XMLHttpRequest</code>或<code>ActiveX</code>的支持;</li> <li>并且在请求完毕后可以通过调用 callback 的方式回传结果</li></ul></li> <li>缺点:
<ul><li>它只支持<code>GET</code>请求而不支持<code>POST</code>等其他类型的 HTTP请求;</li> <li>它只支持跨域 HTTP 请求,不能解决同域的两个页面之间如何进行 JavaScript 调用的问题.</li></ul></li></ul></div> <h4 id="通过cors跨域"><a href="#通过cors跨域" class="header-anchor">#</a> 通过<code>CORS</code>跨域</h4> <div class="custom-block warning"><ul><li><code>CORS(Cross-Origin Resoutce Sharing) 跨域资源共享</code>,定义了必须在访问跨域资源时,浏览器与服务器应该如何沟通.</li> <li>CORS<code>自定义HTTP头部</code>让浏览器与服务器进行沟通,从而决定请求或响应是应该成功还是失败.</li> <li>目前,所有浏览器都支持该功能,IE 浏览器不能地域 IE10.</li> <li>整个 CORE 通信过程,都是浏览器自动完成,不需要用户参与,对于开发者来说,CORS 通信与同源的 AJAX 通信没有差别,代码完全一样.</li> <li>浏览器一旦发现 AJAX 请求跨源,就会自动添加一些附加的头信息,有时还会多出一次附加的请求,但是用户不会感觉到.</li></ul></div> <div class="custom-block warning"><p>因此,实现 <code>CORS</code> 通信的关键是服务器,只要服务器实现了<code>CORS</code>接口,就可以跨源通信.<br>
服务器端对于CORS的支持,主要就是通过设置<code>Access-Control-Allow-Origin</code>来进行的,如果浏览器检测到相应的设置,就可以允许 Ajax进行跨域的访问.</p></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 平时的 ajax 请求</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/damonare&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 相对路径</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token comment">//如果我们要使用CORS，相关Ajax代码可能如下所示</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;￼GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://segmentfault.com/u/trigkit4/&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 绝对路径</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token comment">// 代码与之前的区别就在于相对路径换成了其他域的绝对路径，也就是你要跨域访问的接口地址。</span>
</code></pre></div><p>CORS 和 JSONP 对比:</p> <ul><li>JSONP 只能实现 GET 请求,而 CORS 支持所有类型的 HTTP 请求.</li> <li>使用 CORS,开发者可以使用普通的XMLHttpRequest发起请求和获得数据，比起JSONP有更好的错误处理。</li> <li>JSONP主要被老的浏览器支持，它们往往不支持CORS，而绝大多数现代浏览器都已经支持了CORS）。</li></ul> <h4 id="通过-window-name跨域"><a href="#通过-window-name跨域" class="header-anchor">#</a> 通过 <code>window.name</code>跨域</h4> <div class="custom-block warning"><ul><li><code>window</code>对象有个<code>name</code>属性,该属性有个特征:即在一个窗口(window)的声明周期内,窗口载入的所有的页面都是共享一个<code>window.name</code>的,每个页面对<code>window.name</code>都有读写的权限,<code>window.name</code>是持久存在一个窗口载入过的所有页面中的,并不会因新页面的载入而进行重置.</li> <li>由于安全原因,浏览器始终会保持<code>window.name</code>是<code>string</code>类型.</li></ul></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 同样这个方法也可以应用和 iframe 交互来: </span>
<span class="token comment">// 比如 b.html 页面设置好要传递的字符串,用 window.name 进行传递,a.html 页面,在 iframe 加载成功之后,打开一个空白页面,避免出现跨域问题,获取传递的 window.name</span>

<span class="token comment">//  a 页面 :  http://a.local.com/a.html</span>
<span class="token operator">&lt;</span>iframe id<span class="token operator">=</span><span class="token string">&quot;iframe&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;http://b.local.com/b.html&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>iframe<span class="token operator">&gt;</span>
    
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">var</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    iframe<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        iframe<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            data <span class="token operator">=</span> iframe<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'about:blank'</span><span class="token punctuation">;</span> 
        <span class="token comment">// 或者将里面的 about:blank 替换成某个同源页面（about:blank，javascript: 和 data: 中的内容，继承了载入他们的页面的源。）</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// b页面 : http://b.local.com/b.html</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'wayne zhu'</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
        school<span class="token operator">:</span> <span class="token string">'xjtu'</span>
    <span class="token punctuation">}</span>
    window<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h2 id="_2020-07-14"><a href="#_2020-07-14" class="header-anchor">#</a> 2020-07-14</h2> <h3 id="url中的-hash"><a href="#url中的-hash" class="header-anchor">#</a> url中的#(hash)</h3> <div class="custom-block warning"><p>url中的 #(hash) 的含义 : <code>hash</code>属性是一个可读可写的字符串,该字符串是<code>URL</code>的锚部分(从#号开始的部分)</p></div> <ul><li><code>#</code>代表网页中的一个位置,其右面的字符,就是该位置的标识符:<div class="language-js extra-class"><pre class="language-js"><code>   <span class="token comment">// 代表网页 index.html 的 print 位置,浏览器读取这个 URL 后,会自动将 print 位置滚动到可视区域.</span>

   http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token operator">/</span>index<span class="token punctuation">.</span>html#print 

   <span class="token comment">// 为网页位置指定标识符,有两种方法,一是使用锚点,比如</span>
   <span class="token operator">&lt;</span>a name<span class="token operator">=</span><span class="token string">&quot;print&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

   <span class="token comment">// 二是使用 id 属性,比如</span>
   <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;print&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div></li> <li>HTTP 请求不包括'#' : '#'是用来指导浏览器动作的,对服务器完全无用,所以,HTTP 请求不包括'#'.<div class="language-js extra-class"><pre class="language-js"><code>    http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token operator">/</span>index<span class="token punctuation">.</span>html#print

    <span class="token comment">// 浏览器实际发出的请求是这样的:</span>
    <span class="token constant">GET</span> <span class="token operator">/</span>index<span class="token punctuation">.</span>html <span class="token constant">HTTP</span><span class="token operator">/</span><span class="token number">1.1</span>
    Host<span class="token operator">:</span> www<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com   
    <span class="token comment">// 可以看到，只是请求index.html，根本没有&quot;#print&quot;的部分。    </span>
</code></pre></div></li> <li>#后的字符: 在一个#后面出现的任何字符,都会被浏览器解析为位置标识符,也就意味着,这些字符都不会被发送到服务器端.<div class="language-js extra-class"><pre class="language-js"><code>    http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token operator">?</span>color<span class="token operator">=</span>#fff

    <span class="token comment">// 浏览器实际发出的请求是这样的:</span>
    <span class="token constant">GET</span> <span class="token operator">/</span>index<span class="token punctuation">.</span>html <span class="token constant">HTTP</span><span class="token operator">/</span><span class="token number">1.1</span>
    Host<span class="token operator">:</span> www<span class="token punctuation">.</span>example<span class="token punctuation">.</span>com 

    <span class="token comment">// 可以看到,&quot;#fff&quot;被省略了。只有将#转码为%23，浏览器才会将其作为实义字符处理</span>
    http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>example<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token operator">?</span>color<span class="token operator">=</span><span class="token operator">%</span><span class="token number">23</span>fff
</code></pre></div></li> <li>改变 # 不触发网页重载 : 单单改变#后的部分,浏览器只会滚动到相应的位置,不会重新加载网页.</li> <li>改变 # 会改变浏览器的访问历史 : 每一次改变 # 后的部分,都会在浏览器的访问历史中增加一个记录,使用&quot;后退&quot;按钮,就可以回到上一个位置.</li> <li><code>window.location.hash</code>读取 # 值 : 这个属性可读可写,读取时,可以用来判断网页状态是否改变,写入时,则会在不重载网页的前提下,创造一条访问历史记录.</li> <li><code>onhashchange</code>事件: 这是一个 HTML5新增的事件,当 # 值发生变化时,就会触发这个事件,IE8+、Firefox 3.6+、Chrome 5+、Safari 4.0+支持该事件。对于不支持 <code>onhashchange</code>的浏览器,可以用 <code>setInterval</code>监控<code>location.hash</code>的变化.<div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 使用的三种方法</span>
window<span class="token punctuation">.</span>onhashchange <span class="token operator">=</span> func<span class="token punctuation">;</span>
<span class="token operator">&lt;</span>body onhashchange<span class="token operator">=</span><span class="token string">&quot;func();&quot;</span><span class="token operator">&gt;</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;hashchange&quot;</span><span class="token punctuation">,</span> func<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre></div></li></ul> <h3 id="轮询"><a href="#轮询" class="header-anchor">#</a> 轮询</h3> <div class="custom-block warning"><p>轮询(Polling) : 是一种 CPU 决策如何提供周边设备服务的方式,又称<code>程控输出入(Programmend I/O)</code>.<br>
轮询法 : 由 CPU 定时发出询问,依序询问每一个周边设备是否需要其服务,有即给予服务,服务结束后再问下一个周边,接着不断周而复始.</p></div> <h3 id="websocket、长短连接"><a href="#websocket、长短连接" class="header-anchor">#</a> websocket、长短连接</h3> <p>(https://www.cnblogs.com/miaozhihang/p/9518584.html)
https://juejin.im/entry/589921640ce46300560ef894#comment</p> <ul><li><code>HTTP</code> 协议 : 是一个应用层协议,无状态,端口号为80,主要版本有1.0/1.1/2.0
<ul><li>HTTP/1.* : 一次请求-响应,建立一个连接,用完关闭;</li> <li>HTTP/1.1 : 串行化单线程处理,可以同时在同一个 tcp 链接上发送多个请求,但是只有响应是有顺序的,只有上一个请求完成后,下一个才能响应,一旦有任务处理超时等,后续任务只能被阻塞(线头阻塞).</li> <li>HTTP/2 : 并行执行,某任务耗时严重,不会影响到任务正常执行.</li></ul></li> <li><code>TCP</code>(Transmission Control Protocol) 传输控制协议 : 是一种面向连接(连接导向)的,可靠的,基于 IP 的传输层协议.</li> <li><code>websocket</code>: 是 html5 提出的一个协议规范,是为解决客户端和服务端实时通信.本质上是一个基于 tcp,先通过 HTTP/HTTPS 协议发起的一条特殊的 http 请求进行握手后创建一个用于减缓数据的 TCP 连接.<br>
WebSocket优势： 浏览器和服务器只需要要做一个握手的动作，在建立连接之后，双方可以在任意时刻，相互推送信息。同时，服务器与客户端之间交换的头信息很小。</li> <li>短连接 : 连接 -&gt; 传输数据 -&gt; 关闭连接<br>
HTTP 是无状态的,浏览器和服务器每进行一次 HTTP 操作,就建立一次连接,但任务结束就中断连接.<br>
也可以这样说,短连接是指<code>SOCKET</code>连接后发送后接收完数据后马上断开连接.</li> <li>长连接 : 连接-&gt;传输数据-&gt;保持连接 -&gt; 传输数据-&gt; 。。。 -&gt;关闭连接。<br>
长连接指建立SOCKET连接后不管是否使用都保持连接，但安全性较差</li></ul> <h2 id="_2020-07-16"><a href="#_2020-07-16" class="header-anchor">#</a> 2020-07-16</h2> <h3 id="linux下vim的使用"><a href="#linux下vim的使用" class="header-anchor">#</a> <strong><a href="https://blog.csdn.net/yangshuainan/article/details/78219604,''" target="_blank" rel="noopener noreferrer">linux下vim的使用<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></h3> <h4 id="vi-和-vim"><a href="#vi-和-vim" class="header-anchor">#</a> <strong>vi 和 vim</strong></h4> <div class="custom-block warning"><ul><li>vi 编辑器是所有 Unix 及 Linux 系统下标准的编辑器,他相当于 windows 系统中的记事本一样.</li> <li>vim 编辑器是有程序编辑的能力,可以以字体颜色辨别语法的正确性,方便程序设计.</li> <li>vim 可以作为 vi 的升级版本,他可以用多种颜色的方式来显示一些特殊的信息.</li></ul></div> <h4 id="vi-的使用"><a href="#vi-的使用" class="header-anchor">#</a> <strong>vi 的使用</strong></h4> <div class="custom-block warning"><p>基本上 vi 可以分为三种状态 : 一般模式、编辑模式、命令行模式</p></div> <ul><li><p><strong>三种模式之间的切换:</strong></p> <ul><li><p>一般模式进入到编辑模式:</p> <ul><li><p><code>[i]</code> : 从目前光标所在处插入</p></li> <li><p><code>[I]</code> : 从目前所在行的第一个非空格符处开始插入</p></li> <li><p><code>[a]</code> : 从目前光标所在的下一个字符处开始插入</p></li> <li><p><code>[A]</code> : 从光标所在行的最后一个字符串开始插入</p></li> <li><p><code>[o]</code> : 在目前光标所在的下一行处插入新的一行</p></li> <li><p><code>[O]</code> : 在目前光标所在的上一行处插入新的一行</p></li></ul></li> <li><p>一般模式进入到取代模式:</p> <ul><li><code>[r]</code> : 只会取代光标所在的那一个字符一次</li> <li><code>[R]</code> : 会一直取代光标所在的文字,知道按下 ESC 为止</li></ul></li> <li><p>退出编辑模式,回到一般模式: <code>[ESC]</code></p></li> <li><p>一般模式进入到命令行模式 可用按钮说明:</p> <ul><li><code>[:W]</code> : 保存编辑的内容</li> <li><code>[:w!]</code> : 强制写入该文件,但跟你对该文件的权限有关</li> <li><code>[:q]</code> : 离开 vi</li> <li><code>[:q!]</code> : 不想保存修改强制离开</li> <li><code>[:wq]</code> : 保存后离开</li> <li><code>[:x]</code> : 保存后离开</li> <li><code>[ZZ]</code> : 若文件没有改动,则不保存离开,若文件已经被更改过,则保存后离开.</li></ul></li></ul></li> <li><p><strong>一般模式</strong> : 以<code>vim 文件名</code>打开一个文件就直接进入一般模式(这是默认的模式).<br>
在这个模式中,你可以使用<strong>上下左右按键来移动光标</strong>、<strong>删除字符/删除整行来处理文件的内容</strong>、<strong>复制/粘贴来处理你的文件数据</strong>.</p> <p>一般模式可用按钮说明:</p> <ul><li>移动光标 :
<ul><li><code>[k, j, k, l]</code>: 分别控制光标 左、下、上、右 移一格</li> <li><code>[ctrl + b]</code> : 屏幕往&quot;后&quot;移动一页</li> <li><code>[ctrl + f]</code> : 屏幕往&quot;前&quot;移动一页</li> <li><code>[n&lt;space&gt;]</code> : 光标向右移动 n 个字符</li> <li><code>[fn + &gt;]</code> : 移动到这一行的最后面字符处</li> <li><code>[fn + &lt;]</code> : 移动到这一行的最前面字符串</li> <li><code>[w]</code> : 光标跳到下个字的开头</li> <li><code>[e]</code> : 光标跳到下个字的字尾</li> <li><code>[H]</code> : 光标移动到这个屏幕的最上方的那一行的第一个字符</li> <li><code>[M]</code> : 光标移动到这个屏幕的中间的那一行的第一个字符</li> <li><code>[L]</code> : 光标移动到这个屏幕的最下方的那一行的第一个字符</li> <li><code>[G]</code> : 光标移动到这个文件的最后一行</li> <li><code>[nG]</code>: 光标移动到这个文件的第 n 行</li> <li><code>[gg]</code>: 光标移动到这个文件的第一行,相当于[1G]</li> <li><code>[n&lt;Enter&gt;]</code> : 光标向下移动 n 行</li></ul></li> <li>查找
<ul><li><code>[/world]</code> : 光标向下寻找一个名称为 world 的字符串</li> <li><code>[?world]</code> : 光标向上寻找一个名称为 world 的字符串</li> <li><code>[n]</code> : 代表重复前一个查找的动作</li> <li><code>[N]</code> : 与 n 刚好相反,为[反向]进行前一个查找动作</li></ul></li> <li>替换
<ul><li><code>[:n1,n2s/word1/word2/g]</code> : n1 与 n2 为数字,在第 n1 与 n2 之前查找 word1 这个字符串,并将该字符串替换为 word2.</li> <li><code>[:1,$s/word1/word2/g]</code> : 从第一行到最后一行查找 word1 字符串,并将该字符串替换为 word2</li> <li><code>[:1,$s/word1/word2/gc]</code> : 从第一行到最后一行查找 world1 字符串,并将该字符串替换为 word2,且在替换前提示用户确认是否进行替换.</li></ul></li> <li>删除
<ul><li><code>[x]</code> : 向后删除一个字符</li> <li><code>[X]</code> : 向前删除一个字符</li> <li><code>[nx]</code> : 连续向后删除 n 个字符</li> <li><code>[dd]</code> : 删除光标所在行</li> <li><code>[ndd]</code> : 删除光标所在的向下 n 行</li> <li><code>[d1G]</code> : 删除光标所在行到第一行的所有数据</li> <li><code>[dG]</code> : 删除光标所在行到最后一行的所有数据</li> <li><code>[d$]</code> : 删除光标所在处,到该行的最后一个字符</li> <li><code>[d0]</code> : 删除光标所在处,到该行的最前一个字符</li></ul></li> <li>复制
<ul><li><code>[yy]</code> : 复制光标所在的那一行</li> <li><code>[nyy]</code> : 复制光标所在的向下 n 行</li> <li><code>[y1G]</code> : 复制光标所在行到第一行的所有数据</li> <li><code>[yG]</code> : 复制光标所在行到最后一行的所有数据</li> <li><code>[y0]</code> : 复制光标所在的那个字符到该行行首的所有数据</li> <li><code>[y$]</code> : 复制光标所在的那个字符到该行行尾的所有数据</li></ul></li> <li>粘贴
<ul><li><code>[p]</code> : 将已复制的数据在光标下一行粘贴上</li> <li><code>[P]</code> : 将已复制的数据在光标上一行粘贴上</li> <li><code>[u]</code> :恢复前一个操作</li> <li><code>[Ctrl + r]</code> : 重做上一个操作</li> <li><code>[.]</code> : 重复前一个操作</li></ul></li> <li>块选择(vim)
<ul><li><code>[v]</code> : 字符选择,会将光标经过的地方反白选择</li> <li><code>[V]</code> : 行选择,会将光标经过的行反白选择</li> <li><code>[Ctrl + v]</code> : 块选择,可以用长方形的方式选择资料(提制竖列)</li> <li><code>[y]</code> : 将反白的地方复制</li> <li><code>[d]</code> : 将反白的地方删除</li></ul></li></ul></li> <li><p><strong>编辑模式</strong> : 在一般模式中可以进行<strong>删除、复制、粘贴</strong>等的操作,但是却无法<strong>编辑文件的内容</strong>,只有当你按下<code>【i, I, o, O, a, A, r, R】</code>等任何一个字母之后才进入编辑模式,这时候屏幕的左下方会出现<code>【INSERT】或【REPLACE】</code>的字样,此时才可以进行编辑,而如果要返回到一般模式时,则必须按下<code>【ESC】</code>即可退出编辑模式.</p> <ul><li>编辑模式可用按钮说明:
<ul><li><code>[:w filename]</code> : 将编辑的数据保存成另一个文件(类似另存)</li> <li><code>[:r filename]</code> : 将编辑的数据中,读入另一个文件的数据.即将[filename]这个文件的内容加到光标所在行后面.</li> <li><code>[:n1,n2 w filename]</code> : 将 n1 到 n2行的内容保存成 filename 这个文件</li> <li><code>[:!command]</code> : 暂时离开 vi 到命令行模式下执行 command 的显示结果!</li> <li><code>[:set nu]</code> : 显示行号</li> <li><code>[:set nonu]</code> : 与 set nu 相反,取消行号</li></ul></li> <li>多文件编辑(vim): 使用 vim 的时候,可能会碰到你需要复制一个文件中的某段到另一个文件中,而vim 不能够在关闭的时候,把这段保留住,或者使用其他的方法复制.
<ul><li><code>[vim file1 file2]</code> : 多文件编辑</li> <li><code>[:n]</code> : 编辑下一个文件</li> <li><code>[:N]</code> : 编辑上一个文件</li> <li><code>[:files]</code> : 列出目前这个 vim 编辑的所有文件</li></ul></li> <li>多窗口功能(vim): 有两个窗口对照着看的文件
<ul><li><code>[:sp filename]</code> : 开启一个新窗口,如果有加 filename,表示在新窗口开启一个新文件,否则表示两个窗口为同一个文件内容(同步显示)</li> <li><code>[ctrl + w + j]</code> :按键的方法: 先按下[ctrl]不放,再按下 w 后,放开所有的按键,然后再按下 j,则光标可移动到下方的窗口.</li> <li><code>[ctrl + w + k]</code> :按键的方法: 先按下[ctrl]不放,再按下 w 后,放开所有的按键,然后再按下 k,则光标可移动到上方的窗口.</li></ul></li></ul></li> <li><p><strong>命令行模式</strong> : <code>【: / ?】</code>三个中的任何一个,就可以将光标移动到最底下那一行.<br>
在这个模式中,可以<strong>查找、读取、存盘、替换字符、离开vi、显示行号</strong>等的动作都是在此模式中完成的.</p></li></ul> <h4 id="vim-环境设定与记录"><a href="#vim-环境设定与记录" class="header-anchor">#</a> <strong>vim 环境设定与记录</strong></h4> <ul><li><p>记录 : ~/.viminfo</p> <p>如果我们以 vim 软件来查找一个文件内部的某个字符串,这个字符串会被反白,而下次我们再次以vim 编辑这个文件时,该查找的字符串反白情况还是存在.另外,当我们重复编辑同一个文件时,当第二次进入该文件时,光标竟然就在上次离开的那一行的开头.<br>
这个功能可能是方便的,但也有不方便的时候,怎么会这样呢?<br>
这是因为,我们的 vim 会主动的将你曾经做过的行为登录下来,那个记录动作的文件就是<code>.viminfo</code>,不想用这个功能,就直接删除<code>.viminfo</code>.只要你曾经使用过 vim,那么你的个人目录就会有这个文件,这个文件是自动产生的,你在 vim 里头所作的动作,就可以在这个文件内部找到.</p></li> <li><p>环境设定 : ~/.vimrc</p> <p>不同的发型版本对 vim 的预设环境都不太相同,要想知道目前的设定值,可以在一般模式时输入<code>:set all</code>来查阅.</p> <ul><li>:set all &quot;显示目前所有的环境参数设定值</li> <li>:set hlsearch &quot;高亮度反白(高亮度搜寻)</li> <li>:set nohlsearch &quot;取消高亮度反白(高亮度搜寻)</li> <li>:set backspace=2 &quot;在编辑的时候可随时用退格键删除 （０、１的时候，只针对刚输入的字符有效）</li> <li>:set autoindent &quot;自动缩排</li> <li>:set noautoindent &quot;取消自动缩排</li> <li>:set ruler &quot;可显示最后一行的状态</li> <li>:set showmode &quot;左下角那一行的状态</li> <li>:set nu &quot;显示行号</li> <li>:set nonu &quot;取消行号</li> <li>:set bg=dark &quot;显示不同的底色色调</li> <li>:syntax on &quot;进行语法检验，颜色显示</li> <li>:syntax off &quot;关闭语法检验</li></ul> <p>写一下自己的 vim 操作环境 :整体的 vim 设定值一般是置在<code>/etc/vimrc</code>这个文件里面,不建议大家来修改他,我们在自己的个人目录里面建立一个<code>.vimrc</code>文件,在这里面写入自己的内容就能实现了.
<code>cd ~</code> --&gt; <code>vim ~/.vimrc</code> 写入下面内容:</p> <ul><li>set hlsearch &quot;高亮度反白</li> <li>set backspace=2 &quot;可随时用退格键删除</li> <li>set autoindent &quot;自动缩排</li> <li>set ruler &quot;可显示最后一行的状态</li> <li>set showmode &quot;左下角那一行的状态</li> <li>set nu &quot;可以在每一行的最前面显示行号</li> <li>set bg=dark &quot;显示不同的底色色调</li> <li>syntax on &quot;进行语法检验，颜色显示</li></ul> <p>这个文件的双引号 (&quot;)表示的是注释,在下次使用 vim 的时候,就会有自己的 vim 操作环境了,提醒一点,这个文件中前面加不加[:]效果都是一样的.</p></li></ul> <h3 id="linux-命令"><a href="#linux-命令" class="header-anchor">#</a> linux 命令</h3> <p>pwd
显示当前路径</p> <p>cd   change directoty
进入目录</p> <p>ll
显示当前目录下的内容</p> <p>cd ~
~这个目录表示当前账号的个人目录.</p></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-44bd5a18 data-v-44bd5a18><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-44bd5a18><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-44bd5a18></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-44bd5a18></path></svg></div></div></div>
    <script src="/assets/js/app.7ec28ff8.js" defer></script><script src="/assets/js/3.1f6c90bc.js" defer></script><script src="/assets/js/1.930497be.js" defer></script><script src="/assets/js/23.50c47451.js" defer></script>
  </body>
</html>
